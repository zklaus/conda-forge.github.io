"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[3832],{13297:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var r=t(85893),a=t(11151);const o={authors:[{name:"Mahe",title:"Outreachy intern",url:"https://github.com/ForgottenProgramme",image_url:"https://github.com/ForgottenProgramme.png"}],tags:["grayskull","outreachy"]},s="Contributing Packages To conda-forge Using Grayskull",c={permalink:"/blog/2021/06/16/graykull-step-by-step",editUrl:"https://github.com/zklaus/conda-forge.github.io/tree/refs/heads/main/blog/2021-06-16-graykull-step-by-step.md",source:"@site/blog/2021-06-16-graykull-step-by-step.md",title:"Contributing Packages To conda-forge Using Grayskull",description:"When contributing packages to conda-forge, Grayskull can make your life",date:"2021-06-16T00:00:00.000Z",formattedDate:"June 16, 2021",tags:[{label:"grayskull",permalink:"/blog/tags/grayskull"},{label:"outreachy",permalink:"/blog/tags/outreachy"}],readingTime:1.48,hasTruncateMarker:!0,authors:[{name:"Mahe",title:"Outreachy intern",url:"https://github.com/ForgottenProgramme",image_url:"https://github.com/ForgottenProgramme.png",imageURL:"https://github.com/ForgottenProgramme.png"}],frontMatter:{authors:[{name:"Mahe",title:"Outreachy intern",url:"https://github.com/ForgottenProgramme",image_url:"https://github.com/ForgottenProgramme.png",imageURL:"https://github.com/ForgottenProgramme.png"}],tags:["grayskull","outreachy"]},unlisted:!1,prevItem:{title:"Travis CI Security Incident",permalink:"/blog/2021/09/24/travis-security"},nextItem:{title:"Conda-forge Outreachy",permalink:"/blog/2021/02/02/outreachy"}},i={authorsImageUrls:[void 0]},l=[];function h(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"When contributing packages to conda-forge, Grayskull can make your life\nmuch easier. Grayskull generates recipes for Python packages hosted on\nPyPI."}),"\n",(0,r.jsxs)(n.p,{children:["As the\n",(0,r.jsx)(n.a,{href:"https://github.com/conda-incubator/grayskull#introduction",children:"introduction"}),'\nfor Grayskull reads; "The main goal of this project is to generate\nconcise recipes for conda-forge." In this tutorial we learn how to\ncontribute a Python package to the conda-forge channel using Grayskull\nto generate the recipe.']}),"\n",(0,r.jsx)(n.p,{children:"Let us get started."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Install ",(0,r.jsx)(n.code,{children:"grayskull"})," using ",(0,r.jsx)(n.code,{children:"conda"})," through the ",(0,r.jsx)(n.code,{children:"conda-forge"})," channel:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ conda install -c conda-forge grayskull\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Fork and clone the conda-forge ",(0,r.jsx)(n.a,{href:"https://github.com/conda-forge/staged-recipes",children:"staged-recipes\nrepository"})," from\nGitHub."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Checkout a new branch from the ",(0,r.jsx)(n.code,{children:"master branch"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Through CLI, cd inside the 'staged-recipes/recipes' directory."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Call ",(0,r.jsx)(n.code,{children:"grayskull"})," and pass the ",(0,r.jsx)(n.code,{children:"pypi"})," repository, followed by the\nname of the package you want to contribute to conda-forge. For\nexample: ",(0,r.jsx)(n.code,{children:"grayskull pypi abc"})]}),"\n",(0,r.jsxs)(n.p,{children:["Or you could use ",(0,r.jsx)(n.code,{children:"grayskull pypi abc --strict-conda-forge"})," to remove\nsome selectors which are not necessary for conda-forge and adapt\nrecipes to fit better in the conda-forge ecosystem."]}),"\n",(0,r.jsxs)(n.p,{children:["Grayskull will create a folder with the same name as the package (in\nthis case: 'abc') in the 'recipes' folder of the 'staged-recipes'\ndirectory. This folder will contain the ",(0,r.jsx)(n.code,{children:"meta.yaml"})," file and also\nthe license file if the package includes a license in the PyPI\ndistribution."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Go through the generated ",(0,r.jsx)(n.code,{children:"meta.yaml"})," file. For simpler packages, the\ngenerated recipes are nearly perfect, but for some packages you\nmight need to make certain tweaks."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Commit and push the changes. ",(0,r.jsx)(n.code,{children:"git add recipe/abc/meta.yaml"}),"\n",(0,r.jsx)(n.code,{children:'git commit -m "add a commit message"'})," ",(0,r.jsx)(n.code,{children:"git push"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a PR."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Once the CI is passing, post a comment saying:\n",(0,r.jsx)(n.code,{children:"This is ready for review"})," ",(0,r.jsx)(n.code,{children:"@conda-forge-admin, please ping team"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Once the PR gets merged, your package will be available on the\nconda-forge channel. Tada! It's that easy."})]})}function d(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>s});var r=t(67294);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);